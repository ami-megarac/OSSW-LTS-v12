--- linux_patch034/drivers/tty/tty_jobctrl.c	2021-01-05 10:07:01.841416651 +0800
+++ linux/drivers/tty/tty_jobctrl.c	2021-01-05 10:23:51.472449556 +0800
@@ -494,10 +494,10 @@
 	if (session_of_pgrp(pgrp) != task_session(current))
 		goto out_unlock;
 	retval = 0;
-	spin_lock_irq(&tty->ctrl_lock);
+	spin_lock_irq(&real_tty->ctrl_lock);
 	put_pid(real_tty->pgrp);
 	real_tty->pgrp = get_pid(pgrp);
-	spin_unlock_irq(&tty->ctrl_lock);
+	spin_unlock_irq(&real_tty->ctrl_lock);
 out_unlock:
 	rcu_read_unlock();
 	return retval;
