diff -Naru linux_origin/include/linux/netfilter/x_tables.h linux/include/linux/netfilter/x_tables.h
--- linux_origin/include/linux/netfilter/x_tables.h	2021-04-30 18:04:29.483723379 +0800
+++ linux/include/linux/netfilter/x_tables.h	2021-04-30 18:16:47.887091822 +0800
@@ -376,7 +376,7 @@
 	 * since addend is most likely 1
 	 */
 	__this_cpu_add(xt_recseq.sequence, addend);
-	smp_wmb();
+	smp_mb();
 
 	return addend;
 }
diff -Naru linux_origin/net/netfilter/x_tables.c linux/net/netfilter/x_tables.c
--- linux_origin/net/netfilter/x_tables.c	2021-04-30 18:05:06.043086112 +0800
+++ linux/net/netfilter/x_tables.c	2021-04-30 18:17:43.518152811 +0800
@@ -1387,7 +1387,7 @@
 	table->private = newinfo;
 
 	/* make sure all cpus see new ->private value */
-	smp_wmb();
+	smp_mb();
 
 	/*
 	 * Even though table entries have now been swapped, other CPU's
